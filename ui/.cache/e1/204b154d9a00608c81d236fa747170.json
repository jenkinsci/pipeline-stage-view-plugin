{"id":"S7AJ","dependencies":[{"name":"/src/jenkins/plugins/pipeline-stage-view-plugin/ui/package.json","includedInParent":true,"mtime":1659956253918},{"name":"../jQuery","loc":{"line":24,"column":22,"index":1170},"parent":"/src/jenkins/plugins/pipeline-stage-view-plugin/ui/src/main/js/view/stage-logs.js","resolved":"/src/jenkins/plugins/pipeline-stage-view-plugin/ui/src/main/js/jQuery/index.js"},{"name":"./templates","loc":{"line":25,"column":24,"index":1208},"parent":"/src/jenkins/plugins/pipeline-stage-view-plugin/ui/src/main/js/view/stage-logs.js","resolved":"/src/jenkins/plugins/pipeline-stage-view-plugin/ui/src/main/js/view/templates/index.js"},{"name":"./widgets/dialog","loc":{"line":26,"column":21,"index":1245},"parent":"/src/jenkins/plugins/pipeline-stage-view-plugin/ui/src/main/js/view/stage-logs.js","resolved":"/src/jenkins/plugins/pipeline-stage-view-plugin/ui/src/main/js/view/widgets/dialog/index.js"},{"name":"window-handle","loc":{"line":30,"column":28,"index":1386},"parent":"/src/jenkins/plugins/pipeline-stage-view-plugin/ui/src/main/js/view/stage-logs.js","resolved":"/src/jenkins/plugins/pipeline-stage-view-plugin/ui/node_modules/window-handle/index.js"}],"generated":{"js":"var e=require(\"../jQuery\"),a=require(\"./templates\"),s=require(\"./widgets/dialog\");exports.render=function(o,t){var i=e.getJQuery(),n=require(\"window-handle\").getWindow(),l=a.apply(\"stage-logs\",o),g=i(n).height(),r=Math.min(800,.7*g),c=i(\".node-log-frame\",l),d=i(\".node-name\",l);l.addClass(\"stageLogsPopover\");return t.off(\"click.cbwf-stage-logs\"),t.on(\"click.cbwf-stage-logs\",function(){s.show(\"Stage Logs (\"+o.name+\")\",l,{classes:\"cbwf-stage-logs-dialog\",placement:\"window-visible-top\",onElement:t,height:r,onshow:function(){i(\".cbwf-stage-logs-dialog .header\");d.click(function(){var e=i(this).parent();e.hasClass(\"active\")||(c.removeClass(\"active\"),e.addClass(\"active\"))}),1===d.length&&d.click()}})}),l};"},"sourceMaps":{"js":{"mappings":[{"source":"view/stage-logs.js","original":{"line":24,"column":0},"generated":{"line":1,"column":0}},{"source":"view/stage-logs.js","name":"jqProxy","original":{"line":24,"column":4},"generated":{"line":1,"column":4}},{"source":"view/stage-logs.js","name":"require","original":{"line":24,"column":14},"generated":{"line":1,"column":6}},{"source":"view/stage-logs.js","original":{"line":24,"column":22},"generated":{"line":1,"column":14}},{"source":"view/stage-logs.js","name":"templates","original":{"line":25,"column":4},"generated":{"line":1,"column":27}},{"source":"view/stage-logs.js","name":"require","original":{"line":25,"column":16},"generated":{"line":1,"column":29}},{"source":"view/stage-logs.js","original":{"line":25,"column":24},"generated":{"line":1,"column":37}},{"source":"view/stage-logs.js","name":"dialog","original":{"line":26,"column":4},"generated":{"line":1,"column":52}},{"source":"view/stage-logs.js","name":"require","original":{"line":26,"column":13},"generated":{"line":1,"column":54}},{"source":"view/stage-logs.js","original":{"line":26,"column":21},"generated":{"line":1,"column":62}},{"source":"view/stage-logs.js","name":"exports","original":{"line":28,"column":0},"generated":{"line":1,"column":82}},{"source":"view/stage-logs.js","name":"render","original":{"line":28,"column":8},"generated":{"line":1,"column":90}},{"source":"view/stage-logs.js","original":{"line":28,"column":17},"generated":{"line":1,"column":97}},{"source":"view/stage-logs.js","name":"stageDescription","original":{"line":28,"column":27},"generated":{"line":1,"column":106}},{"source":"view/stage-logs.js","name":"onElement","original":{"line":28,"column":45},"generated":{"line":1,"column":108}},{"source":"view/stage-logs.js","original":{"line":29,"column":4},"generated":{"line":1,"column":111}},{"source":"view/stage-logs.js","name":"$","original":{"line":29,"column":8},"generated":{"line":1,"column":115}},{"source":"view/stage-logs.js","name":"jqProxy","original":{"line":29,"column":12},"generated":{"line":1,"column":117}},{"source":"view/stage-logs.js","name":"getJQuery","original":{"line":29,"column":20},"generated":{"line":1,"column":119}},{"source":"view/stage-logs.js","name":"theWindow","original":{"line":30,"column":8},"generated":{"line":1,"column":131}},{"source":"view/stage-logs.js","name":"require","original":{"line":30,"column":20},"generated":{"line":1,"column":133}},{"source":"view/stage-logs.js","original":{"line":30,"column":28},"generated":{"line":1,"column":141}},{"source":"view/stage-logs.js","name":"getWindow","original":{"line":30,"column":45},"generated":{"line":1,"column":158}},{"source":"view/stage-logs.js","name":"stageLogsDom","original":{"line":31,"column":8},"generated":{"line":1,"column":170}},{"source":"view/stage-logs.js","name":"templates","original":{"line":31,"column":23},"generated":{"line":1,"column":172}},{"source":"view/stage-logs.js","name":"apply","original":{"line":31,"column":33},"generated":{"line":1,"column":174}},{"source":"view/stage-logs.js","original":{"line":31,"column":39},"generated":{"line":1,"column":180}},{"source":"view/stage-logs.js","name":"stageDescription","original":{"line":31,"column":53},"generated":{"line":1,"column":193}},{"source":"view/stage-logs.js","name":"winHeight","original":{"line":32,"column":8},"generated":{"line":1,"column":196}},{"source":"view/stage-logs.js","name":"$","original":{"line":32,"column":20},"generated":{"line":1,"column":198}},{"source":"view/stage-logs.js","name":"theWindow","original":{"line":32,"column":22},"generated":{"line":1,"column":200}},{"source":"view/stage-logs.js","name":"height","original":{"line":32,"column":33},"generated":{"line":1,"column":203}},{"source":"view/stage-logs.js","name":"dialogHeight","original":{"line":33,"column":8},"generated":{"line":1,"column":212}},{"source":"view/stage-logs.js","name":"Math","original":{"line":33,"column":23},"generated":{"line":1,"column":214}},{"source":"view/stage-logs.js","name":"min","original":{"line":33,"column":28},"generated":{"line":1,"column":219}},{"source":"view/stage-logs.js","original":{"line":33,"column":32},"generated":{"line":1,"column":223}},{"source":"view/stage-logs.js","original":{"line":33,"column":50},"generated":{"line":1,"column":227}},{"source":"view/stage-logs.js","name":"winHeight","original":{"line":33,"column":38},"generated":{"line":1,"column":230}},{"source":"view/stage-logs.js","name":"nodeLogFrames","original":{"line":34,"column":8},"generated":{"line":1,"column":233}},{"source":"view/stage-logs.js","name":"$","original":{"line":34,"column":24},"generated":{"line":1,"column":235}},{"source":"view/stage-logs.js","original":{"line":34,"column":26},"generated":{"line":1,"column":237}},{"source":"view/stage-logs.js","name":"stageLogsDom","original":{"line":34,"column":45},"generated":{"line":1,"column":255}},{"source":"view/stage-logs.js","name":"nodeNameBars","original":{"line":35,"column":8},"generated":{"line":1,"column":258}},{"source":"view/stage-logs.js","name":"$","original":{"line":35,"column":23},"generated":{"line":1,"column":260}},{"source":"view/stage-logs.js","original":{"line":35,"column":25},"generated":{"line":1,"column":262}},{"source":"view/stage-logs.js","name":"stageLogsDom","original":{"line":35,"column":39},"generated":{"line":1,"column":275}},{"source":"view/stage-logs.js","name":"stageLogsDom","original":{"line":37,"column":4},"generated":{"line":1,"column":278}},{"source":"view/stage-logs.js","name":"addClass","original":{"line":37,"column":17},"generated":{"line":1,"column":280}},{"source":"view/stage-logs.js","original":{"line":37,"column":26},"generated":{"line":1,"column":289}},{"source":"view/stage-logs.js","original":{"line":73,"column":4},"generated":{"line":1,"column":309}},{"source":"view/stage-logs.js","name":"onElement","original":{"line":41,"column":4},"generated":{"line":1,"column":316}},{"source":"view/stage-logs.js","name":"off","original":{"line":41,"column":14},"generated":{"line":1,"column":318}},{"source":"view/stage-logs.js","original":{"line":39,"column":23},"generated":{"line":1,"column":322}},{"source":"view/stage-logs.js","name":"onElement","original":{"line":42,"column":4},"generated":{"line":1,"column":347}},{"source":"view/stage-logs.js","name":"on","original":{"line":42,"column":14},"generated":{"line":1,"column":349}},{"source":"view/stage-logs.js","original":{"line":39,"column":23},"generated":{"line":1,"column":352}},{"source":"view/stage-logs.js","original":{"line":42,"column":31},"generated":{"line":1,"column":376}},{"source":"view/stage-logs.js","name":"dialog","original":{"line":43,"column":8},"generated":{"line":1,"column":387}},{"source":"view/stage-logs.js","name":"show","original":{"line":43,"column":15},"generated":{"line":1,"column":389}},{"source":"view/stage-logs.js","original":{"line":43,"column":20},"generated":{"line":1,"column":394}},{"source":"view/stage-logs.js","name":"stageDescription","original":{"line":43,"column":37},"generated":{"line":1,"column":409}},{"source":"view/stage-logs.js","name":"name","original":{"line":43,"column":54},"generated":{"line":1,"column":411}},{"source":"view/stage-logs.js","original":{"line":43,"column":61},"generated":{"line":1,"column":416}},{"source":"view/stage-logs.js","name":"stageLogsDom","original":{"line":43,"column":66},"generated":{"line":1,"column":420}},{"source":"view/stage-logs.js","original":{"line":43,"column":80},"generated":{"line":1,"column":422}},{"source":"view/stage-logs.js","name":"classes","original":{"line":44,"column":12},"generated":{"line":1,"column":423}},{"source":"view/stage-logs.js","original":{"line":44,"column":21},"generated":{"line":1,"column":431}},{"source":"view/stage-logs.js","name":"placement","original":{"line":45,"column":12},"generated":{"line":1,"column":456}},{"source":"view/stage-logs.js","original":{"line":45,"column":23},"generated":{"line":1,"column":466}},{"source":"view/stage-logs.js","name":"onElement","original":{"line":46,"column":12},"generated":{"line":1,"column":487}},{"source":"view/stage-logs.js","name":"onElement","original":{"line":46,"column":23},"generated":{"line":1,"column":497}},{"source":"view/stage-logs.js","name":"height","original":{"line":47,"column":12},"generated":{"line":1,"column":499}},{"source":"view/stage-logs.js","name":"dialogHeight","original":{"line":47,"column":20},"generated":{"line":1,"column":506}},{"source":"view/stage-logs.js","name":"onshow","original":{"line":48,"column":12},"generated":{"line":1,"column":508}},{"source":"view/stage-logs.js","original":{"line":48,"column":20},"generated":{"line":1,"column":515}},{"source":"view/stage-logs.js","name":"$","original":{"line":49,"column":29},"generated":{"line":1,"column":526}},{"source":"view/stage-logs.js","original":{"line":49,"column":31},"generated":{"line":1,"column":528}},{"source":"view/stage-logs.js","name":"nodeNameBars","original":{"line":51,"column":16},"generated":{"line":1,"column":563}},{"source":"view/stage-logs.js","name":"click","original":{"line":51,"column":29},"generated":{"line":1,"column":565}},{"source":"view/stage-logs.js","original":{"line":51,"column":35},"generated":{"line":1,"column":571}},{"source":"view/stage-logs.js","original":{"line":52,"column":20},"generated":{"line":1,"column":582}},{"source":"view/stage-logs.js","name":"nodeLogFrame","original":{"line":53,"column":24},"generated":{"line":1,"column":586}},{"source":"view/stage-logs.js","name":"$","original":{"line":52,"column":38},"generated":{"line":1,"column":588}},{"source":"view/stage-logs.js","original":{"line":52,"column":40},"generated":{"line":1,"column":590}},{"source":"view/stage-logs.js","name":"parent","original":{"line":53,"column":51},"generated":{"line":1,"column":596}},{"source":"view/stage-logs.js","name":"nodeLogFrame","original":{"line":54,"column":33},"generated":{"line":1,"column":605}},{"source":"view/stage-logs.js","name":"hasClass","original":{"line":54,"column":46},"generated":{"line":1,"column":607}},{"source":"view/stage-logs.js","original":{"line":54,"column":55},"generated":{"line":1,"column":616}},{"source":"view/stage-logs.js","name":"nodeLogFrames","original":{"line":59,"column":24},"generated":{"line":1,"column":628}},{"source":"view/stage-logs.js","name":"removeClass","original":{"line":59,"column":38},"generated":{"line":1,"column":630}},{"source":"view/stage-logs.js","original":{"line":59,"column":50},"generated":{"line":1,"column":642}},{"source":"view/stage-logs.js","name":"nodeLogFrame","original":{"line":61,"column":24},"generated":{"line":1,"column":652}},{"source":"view/stage-logs.js","name":"addClass","original":{"line":61,"column":37},"generated":{"line":1,"column":654}},{"source":"view/stage-logs.js","original":{"line":61,"column":46},"generated":{"line":1,"column":663}},{"source":"view/stage-logs.js","original":{"line":65,"column":44},"generated":{"line":1,"column":676}},{"source":"view/stage-logs.js","name":"nodeNameBars","original":{"line":65,"column":20},"generated":{"line":1,"column":680}},{"source":"view/stage-logs.js","name":"length","original":{"line":65,"column":33},"generated":{"line":1,"column":682}},{"source":"view/stage-logs.js","name":"nodeNameBars","original":{"line":66,"column":20},"generated":{"line":1,"column":690}},{"source":"view/stage-logs.js","name":"click","original":{"line":66,"column":33},"generated":{"line":1,"column":692}},{"source":"view/stage-logs.js","name":"stageLogsDom","original":{"line":73,"column":11},"generated":{"line":1,"column":705}}],"sources":{"view/stage-logs.js":"/*\n * The MIT License\n *\n * Copyright (c) 2013-2016, CloudBees, Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nvar jqProxy = require('../jQuery');\nvar templates = require('./templates');\nvar dialog = require('./widgets/dialog');\n\nexports.render = function (stageDescription, onElement) {\n    var $ = jqProxy.getJQuery();\n    var theWindow = require('window-handle').getWindow();\n    var stageLogsDom = templates.apply('stage-logs', stageDescription);\n    var winHeight = $(theWindow).height();\n    var dialogHeight = Math.min(800, (winHeight * 0.7));\n    var nodeLogFrames = $('.node-log-frame', stageLogsDom);\n    var nodeNameBars = $('.node-name', stageLogsDom);\n\n    stageLogsDom.addClass('stageLogsPopover');\n\n    var clickNSEvent = 'click.cbwf-stage-logs';\n\n    onElement.off(clickNSEvent);\n    onElement.on(clickNSEvent, function() {\n        dialog.show('Stage Logs (' + stageDescription.name + ')', stageLogsDom, {\n            classes: 'cbwf-stage-logs-dialog',\n            placement: 'window-visible-top',\n            onElement: onElement,\n            height: dialogHeight,\n            onshow: function() {\n                var header = $('.cbwf-stage-logs-dialog .header');\n\n                nodeNameBars.click(function() {\n                    var nodeNameBar = $(this);\n                    var nodeLogFrame = nodeNameBar.parent();\n                    var active = nodeLogFrame.hasClass('active');\n\n                    // add active state to the clicked log frame if was previously inactive\n                    if (!active) {\n                        // Hide any other log box\n                        nodeLogFrames.removeClass('active');\n                        // Show this one\n                        nodeLogFrame.addClass('active');\n                    }\n                });\n\n                if (nodeNameBars.length === 1) {\n                    nodeNameBars.click();\n                }\n            }\n        });\n    });\n\n    // for testing...\n    return stageLogsDom;\n}\n"},"lineCount":null}},"error":null,"hash":"5e9adc427a9f8115a7535a0efbd9709b","cacheData":{"env":{}}}